@implements IDisposable
@inject IJSRuntime JS

<div class="testimonials-carousel">
    <div class="testimonial-container">
        @if (testimonials != null && testimonials.Any())
        {
            <div class="testimonial-slide @(currentIndex == 0 ? "active" : "")">
                <div class="testimonial-content">
                    <p class="testimonial-text">"@testimonials[currentIndex].Text"</p>
                    <div class="testimonial-author">
                        <strong>@testimonials[currentIndex].Author</strong>
                        <span>@testimonials[currentIndex].Role</span>
                    </div>
                    <div class="testimonial-rating">
                        @for (int i = 0; i < 5; i++)
                        {
                            <i class="fas fa-star"></i>
                        }
                    </div>
                </div>
            </div>
        }
    </div>

    <div class="carousel-controls">
        <button class="carousel-btn prev" @onclick="PrevSlide">
            <i class="fas fa-chevron-left"></i>
        </button>
        <div class="carousel-dots">
            @if (testimonials != null)
            {
                @for (int i = 0; i < testimonials.Count; i++)
                {
                    var index = i;
                    <span class="dot @(currentIndex == index ? "active" : "")"
                          @onclick="() => GoToSlide(index)"></span>
                }
            }
        </div>
        <button class="carousel-btn next" @onclick="NextSlide">
            <i class="fas fa-chevron-right"></i>
        </button>
    </div>
</div>
